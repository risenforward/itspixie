import Collapse from 'components/Markdown/Collapse'
import Warning from 'components/Markdown/Warning'
import Code from 'components/Markdown/Code'

export const meta = {
  title: 'Prisma Basics: Datamodel, Prisma Client & Server',
  position: 20,
  description: 'Learn about the main concepts you are dealing with when working Prisma. Most importantly: Prisma services, servers and the datamodel.'
}

## Main components

When working with Prisma, you're primarily dealing with **three components**:

The **datamodel** is the foundation for everything you do with Prisma. It determines the API exposed by your auto-generated **Prisma client**. You also need to have a **Prisma server** which is a standalone infrastructure component sitting on top of your database. 

## Datamodel

The datamodel primarily serves as foundation for the API operations of your Prisma client. 

For each model defined in your datamodel, there are the following Prisma client operations automatically generated for you:

- **Read a single record** of the model
- **Read a list of records** of the model (including filtering, sorting & pagination)
- **Write a new record** of the model
- **Update an existing record** of the model
- **Delete an existing record** of the model 
- **Check for the existence** of a certain record of the model
- **Receive realtime updates** when there is a write operation on any record of the model

The datamodel is written in `.prisma`-files and uses [GraphQL SDL syntax](https://www.prisma.io/blog/graphql-sdl-schema-definition-language-6755bcb9ce51/). SDL is used because it is _agnostic of programming languages_, _simple_, _expressive_ and _intuitive_ to use.

Here is what a simple datamodel with two models looks like:

```graphql
type Post {
  id: ID! @unique
  createdAt: DateTime!
  published: Boolean! @default(value: "false")
  title: String!
  author: User!
}

type User {
  id: ID! @unique
  email: String! @unique
  name: String!
  posts: [Post!]!
}
```

Here's a few things to note about the datamodel:

- The `Post` and `User` models are connected via a relation (defined by the `author` and `posts` fields).
- The `!` following a type means that the corresponding field of the model can never be `null`.
- The `@unique` directive is used by Prisma to ensure there'll never be two records that have the same value for this field.
- The `@default` directive is used by Prisma to set default values when records of this model are being created.
- `createdAt` is not writeable and will be maintained by Prisma, it indicates the exact time when a record was created. There also is `updatedAt` which indicates the time when a record was last updated.

## Prisma client

The Prisma client is an auto-generated library that replaces a traditional ORM in your API server. It connects to a Prisma server which sits on top your database:

![](https://imgur.com/4KNuto9.png)

The Prisma client is available in various programming languages and provides type safe database access. In contrast to traditional ORMs, it provides a seamless API to work with relational data and transactions.

<Code languages={["JavaScript", "TypeScript", "Go"]}>

```js
const newUserWithLinks = await prisma
  .createUser({
    name: "Alice",
    email: "alice@prisma.io",
    password: "IlikeTurtles",
    links: {
      create: [{
        description: "My first link",
        url: "https://www.prisma.io"
      }, {
        description: "My second link",
        url: "https://www.howtographql.com"
      }],
      connect: {
        id: "cjli6tknz005s0a23uf0lmlve"
      }
    }, 
  })
```

</Code>

## Prisma server

