export const meta = {
  title: 'Build API Servers with Prisma',
  step: 3,
  position: 2,
  gettingStartedTitle: 'REST API',
  nextText: 'Congratulations! ðŸš€ You made it through the quickstart tutorial and learned how to use Prisma and the Prisma Client to build a REST API.'
}

## Goals

On this page, you will learn how to:

- Implement a REST API using Express & Prisma Client

## Configure project

You'll use [Express.js](https://expressjs.com/) as your web server. Add the `express` and `body-parser` dependencies to your project with this command:

```bash
npm install express body-parser --save
```

## Define and implement API

There will be six routes that provide the API for a simple blogging application:

- `GET`
  - `/posts/published`: Returns all _published_ posts
  - `/post/:postId`: Returns a specific post by its id
  - `/posts/user/:userId`: Returns all the post written by a specific user
- `POST`
  - `/user`: Create a new user
  - `/post/draft`: Create a new _unpublished_ post
- `PUT`
  - `/post/publish`: _Publish_ a post

Replace the current contents of `index.js` with the following code:

```js lineNumbers,copy
const { Prisma } = require('./prisma')
const app = express()
const express = require('express')
const bodyParser = require('body-parser')

const prisma = new Prisma()

app.use(bodyParser.json())

app.get(`/posts/published`, async (req, res) => {
  const publishedPosts = await prisma.posts({ where: { published: true } })
  res.json(publishedPosts)
})

app.get('/post/:postId', async (req, res) => {
  const { postId } = req.params
  const post = await prisma.post({ id: postId })
  res.json(post)
})

app.get('/posts/user/:userId', async (req, res) => {
  const { userId } = req.params
  const postsByUser = await prisma
    .user({ id: userId })
    .posts()
  res.json(postsByUser)
})

app.post('/user', async (req, res) => {
  const newUser = await prisma.createUser(req.body)
  res.json(newUser)
})

app.post('/post/draft', async (req, res) => {
  const newPost = await prisma.createPost(req.body)
  res.json(newPost)
})

app.put(`/post/publish/:postId`, async (req, res) => {
  const { postId } = req.params
  const updatedPost = await prisma.updatePost(
    {
      where: { id: postId },
      data: { published: true },
    },

  )
  res.json(updatedPost)
})

app.listen(3000, () => console.log('Server is running on http://localhost:3000'))
```

## Start the server

Start the server with this command:

```js
node index.js
```

You can now use a tool like [Postman](https://www.getpostman.com/) to explore your the functionlity of the routes.